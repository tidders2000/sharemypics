{"filter":false,"title":"stripe.js","tooltip":"/static/js/stripe.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":31,"column":3},"action":"remove","lines":["$(function() {","    $(\"#payment-form\").submit(function() {","        var form = this;","        var card = {","            number: $(\"#id_credit_card_number\").val(),","            expMonth: $(\"#id_expiry_month\").val(),","            expYear: $(\"#id_expiry_year\").val(),","            cvc: $(\"#id_cvv\").val()","        };","    ","    Stripe.createToken(card, function(status, response) {","        if (status === 200) {","            $(\"#credit-card-errors\").hide();","            $(\"#id_stripe_id\").val(response.id);","","            // Prevent the credit card details from being submitted","            // to our server","            $(\"#id_credit_card_number\").removeAttr('name');","            $(\"#id_cvv\").removeAttr('name');","            $(\"#id_expiry_month\").removeAttr('name');","            $(\"#id_expiry_year\").removeAttr('name');","","            form.submit();","        } else {","            $(\"#stripe-error-message\").text(response.error.message);","            $(\"#credit-card-errors\").show();","            $(\"#validate_card_btn\").attr(\"disabled\", false);","        }","    });","    return false;","    });","});"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":37,"column":2},"action":"insert","lines":["$(function () {","\t$(\"#payment-form\").submit(function () {","\t\t$(\"#validate-card-btn\").prop(\"disabled\", true).html(\"Working...\");","\t\tvar form = this;","\t\tvar card = {","\t\t\tnumber: $(\"#id_credit_card_number\").val(),","\t\t\texpMonth: $(\"#id_expiry_month\").val(),","\t\t\texpYear: $(\"#id_expiry_year\").val(),","\t\t\tcvc: $(\"#id_cvv\").val()","\t\t};","","","\t\tStripe.createToken(card, function (status, response) {","\t\t\tconsole.log(status);","\t\t\tconsole.log(response);","\t\t\tif (status === 200) {","\t\t\t\t$(\"#credit-card-errors\").hide();","\t\t\t\t$(\"#id_stripe_id\").val(response.id);","\t\t\t\t$(\"#id_credit_card_number\").removeAttr('name');","\t\t\t\t$(\"#id_cvv\").removeAttr('name');","\t\t\t\t$(\"#id_cvv\").removeAttr('name');","\t\t\t\t$(\"#id_expiry_month\").removeAttr('name');","\t\t\t\t$(\"#id_expiry_year\").removeAttr('name');","","\t\t\t\tform.submit();","\t\t\t} else {","\t\t\t\t$(\"#stripe-error-message\").text(response.error.message);","\t\t\t\t$(\"#credit-card-errors\").show();","\t\t\t\t$(\"#stripe-error-message\").slideDown();","\t\t\t\tsetTimeout(() => {","\t\t\t\t\t$(\"#stripe-error-message\").slideUp(2000);","\t\t\t\t}, 4000);","\t\t\t\t$(\"#validate-card-btn\").prop(\"disabled\", false).html(\"Pay Fee\");","\t\t\t}","\t\t});","\t\treturn false;","\t});","})"],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":37,"column":2},"end":{"row":37,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":29,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1565040857224,"hash":"917d93b37df2e9a55f2e95fadef7de7544794d88"}